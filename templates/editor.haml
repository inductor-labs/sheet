:coffeescript
  Transform = require "./transform"
  Datasource = require "./datasource"

  click = (e) ->
    e.preventDefault()
    $(e.currentTarget).next().toggleClass "hidden"

%section.main
  .form-group
    %h4 Data before current transform
    %a(href="" click=click) Show
    .input-spreadsheet-data.hidden

  .editor
    - dataset = @activeDataset()
    - if dataset.activeStep()
      - transducer = @activeStep().transducer()
      %h2.title= transducer.title
      .form-group
        = Transform transducer
    - else
      = Datasource dataset

  .form-group
    %h4 Data after current transform
    %a(href="" click=click) Show
    .output-spreadsheet-data.hidden

  %footer.sheet-navigation
    %ul.nav.nav-pills
      %li.sheet(role="presentation")
        %a(href="#" click=@newDataset) + New Dataset
      - @datasets.each ->
        :coffeescript
          activeClass = ->
            "active" if editor.activeDatasetIndex() is editor.datasets.indexOf(this)

          click = ->
            editor.activeDatasetIndex editor.datasets.indexOf(this)

        %li.sheet(role="presentation" class=activeClass click=click)
          %a(href="#")
            %input.invisible-background(value=@name)
